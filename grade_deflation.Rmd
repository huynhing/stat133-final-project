---
title: "Stat 133 Final Project: Grade Deflation At Berkeley"
author: ""
date: "April 22, 2017"
output: 
  html_document:
    fig_height: 3
    fig_width: 5
---
<!-- Don't edit in between this line and the one below -->
```{r include=FALSE}
# Don't delete this chunk if you are using the DataComputing package
library(DataComputing)
```
*Source file* 
```{r, results='asis', echo=FALSE}
includeSourceDocuments()
```
<!-- Don't edit the material above this line -->

### Import CSVs as Tables and Normalize Them
```{r}
base_url <- "https://raw.githubusercontent.com/huynhing/stat133-final-project/data/raw/"

# Read in files
spring_2009 <- read.csv(paste(base_url, "spring_2009.csv", sep=""), skip=2, header=TRUE, check.names=FALSE)
fall_2009 <- read.csv(paste(base_url, "fall_2009.csv", sep=""), skip=2, header=TRUE, check.names=FALSE)
spring_2010 <- read.csv(paste(base_url, "spring_2010.csv", sep=""), skip=2, header=TRUE, check.names=FALSE)
fall_2010 <- read.csv(paste(base_url, "fall_2010.csv", sep=""), skip=2, header=TRUE, check.names=FALSE)
spring_2011 <- read.csv(paste(base_url, "spring_2011.csv", sep=""), skip=2, header=TRUE, check.names=FALSE)
fall_2011 <- read.csv(paste(base_url, "fall_2011.csv", sep=""), skip=9, header=TRUE, check.names=FALSE)
spring_2012 <- read.csv(paste(base_url, "spring_2012.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
fall_2012 <- read.csv(paste(base_url, "fall_2012.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
spring_2013 <- read.csv(paste(base_url, "spring_2013.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
fall_2013 <- read.csv(paste(base_url, "fall_2013.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
spring_2014 <- read.csv(paste(base_url, "spring_2014.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
fall_2014 <- read.csv(paste(base_url, "fall_2014.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
spring_2015 <- read.csv(paste(base_url, "spring_2015.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
fall_2015 <- read.csv(paste(base_url, "fall_2015.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)
spring_2016 <- read.csv(paste(base_url, "spring_2016.csv", sep=""), header=TRUE, check.names=FALSE)
fall_2016 <- read.csv(paste(base_url, "fall_2016.csv", sep=""), skip=8, header=TRUE, check.names=FALSE)

# Set NAs to 0s
spring_2009[is.na(spring_2009)] <- 0
fall_2009[is.na(fall_2009)] <- 0
spring_2010[is.na(spring_2010)] <- 0
fall_2010[is.na(fall_2010)] <- 0
spring_2011[is.na(spring_2011)] <- 0
fall_2011[is.na(fall_2011)] <- 0
spring_2012[is.na(spring_2012)] <- 0
fall_2012[is.na(fall_2012)] <- 0
spring_2013[is.na(spring_2013)] <- 0
fall_2013[is.na(fall_2013)] <- 0
spring_2014[is.na(spring_2014)] <- 0
fall_2014[is.na(fall_2014)] <- 0
spring_2015[is.na(spring_2015)] <- 0
fall_2015[is.na(fall_2015)] <- 0
spring_2016[is.na(spring_2016)] <- 0
fall_2016[is.na(fall_2016)] <- 0

# Select Only The Important Columns and Normalize the Column Names
# Department Abbreviations, Course Number, A+, A, A-, B+, B, B-, C+, C, C-, D+, D, D-, F
normalized_names <- c("department", "course_number", "A+", "A", "A-", "B+", "B", "B-", "C+", "C", "C-", "D+", "D", "D-", "F")
spring_2009 <- spring_2009 %>%
  select(CourseID, CNUM, `A +`, `A`, `A -`, `B +`, `B`, `B -`, `C +`, `C`, `C -`, `D +`, `D`, `D -`, `F`)
fall_2009 <- fall_2009 %>%
  select(CourseID, CNUM, `A +`, `A`, `A -`, `B +`, `B`, `B -`, `C +`, `C`, `C -`, `D +`, `D`, `D -`, `F`)
spring_2010 <- spring_2010 %>%
  select(CourseID, CNUM, `A +`, `A`, `A -`, `B +`, `B`, `B -`, `C +`, `C`, `C -`, `D +`, `D`, `D -`, `F`)
fall_2010 <- fall_2010 %>%
  select(CourseID, CNUM, `A +`, `A`, `A -`, `B +`, `B`, `B -`, `C +`, `C`, `C -`, `D +`, `D`, `D -`, `F`)
spring_2011 <- spring_2011 %>%
  select(CourseID, CNUM, `A +`, `A`, `A -`, `B +`, `B`, `B -`, `C +`, `C`, `C -`, `D +`, `D`, `D -`, `F`)
fall_2011 <- fall_2011 %>%
  select(COURSE, `COURSE NUMBER`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
spring_2012 <- spring_2012 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
fall_2012 <- fall_2012 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
spring_2013 <- spring_2013 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
fall_2013 <- fall_2013 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
spring_2014 <- spring_2014 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
fall_2014 <- fall_2014 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
spring_2015 <- spring_2015 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
colnames(fall_2015) <- make.unique(colnames(fall_2015)) # Weird CSV
fall_2015 <- fall_2015 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
spring_2016 <- spring_2016 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)
fall_2016 <- fall_2016 %>%
  select(`Course Subject Cd`, `Course Number`, `A+`, `A`, `A-`, `B+`, `B`, `B-`, `C+`, `C`, `C-`, `D+`, `D`, `D-`, `F`)


colnames(spring_2009) <- normalized_names
colnames(fall_2009) <- normalized_names
colnames(spring_2010) <- normalized_names
colnames(fall_2010) <- normalized_names
colnames(spring_2011) <- normalized_names
colnames(fall_2011) <- normalized_names
colnames(spring_2012) <- normalized_names
colnames(fall_2012) <- normalized_names
colnames(spring_2013) <- normalized_names
colnames(fall_2013) <- normalized_names
colnames(spring_2014) <- normalized_names
colnames(fall_2014) <- normalized_names
colnames(spring_2015) <- normalized_names
colnames(fall_2015) <- normalized_names
colnames(spring_2016) <- normalized_names
colnames(fall_2016) <- normalized_names

# Remove Non Alphabetic Characters From Department Abbreviations
# Mutate Each Datatable To Add "Number of Grades" Column
# Number of Grades = sum(A+ ... F columns)
spring_2009 <- spring_2009 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2009 <- fall_2009 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2010 <- spring_2010 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2010 <- fall_2010 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2011 <- spring_2011 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2011 <- fall_2011 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2012 <- spring_2012 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2012 <- fall_2012 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2013 <- spring_2013 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2013 <- fall_2013 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2014 <- spring_2014 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2014 <- fall_2014 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2015 <- spring_2015 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2015 <- fall_2015 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
spring_2016 <- spring_2016 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
fall_2016 <- fall_2016 %>%
  mutate(num_grades = rowSums(.[3:15]), department=gsub("[^0-9A-Za-z]", "", department))
```

### Data Wrangling
```{r}

```
